<?php/* Add this on all pages on top. */set_include_path($_SERVER['DOCUMENT_ROOT'].'/'.PATH_SEPARATOR.$_SERVER['DOCUMENT_ROOT'].'/library/classes/');/** Standard includes */require_once 'config/database.php';require_once 'config/smarty.php';/* Get parameter. */$code = isset($_REQUEST['code']) && trim($_REQUEST['code']) != '' ? trim($_REQUEST['code']) : '';if($code == '') {		/* Get the hell out of here. */		header('Location: /');		exit;	} else {		require_once 'class/participantlogin.php';	require_once 'class/participant.php';		/* Object. */	$participantloginObject 	= new class_participantlogin();	$participantObject 			= new class_participant();		/* Fetch the use. */	$participantloginData = $participantloginObject->getByHash($code, 0);	if($participantloginData) {		/* Activate account and stay on this page. */		$data = array('participantlogin_active' => 1);		$where = $participantloginObject->getAdapter()->quoteInto('participantlogin_code = ?', $participantloginData['participantlogin_code']);		$success = $participantloginObject->update($data, $where);				/* Activate account and stay on this page. */		$data = $where = null; $data = array('participant_active' => 1, 'participant_code' => $participantloginData['participant_code']);		$where = $participantObject->getAdapter()->quoteInto('participant_code = ?', $participantloginData['participant_code']);		$success = $participantObject->update($data, $where);				$smarty->assign('participantloginData', $participantloginData);			} else {		/* Get the hell out of here. */		header('Location: /');		exit;	}}//display template$smarty->display('registration/activate/default.tpl');?>